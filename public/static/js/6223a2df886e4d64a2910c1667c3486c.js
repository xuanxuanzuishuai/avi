/*from tccdn minify at 2016-12-2 13:51:40,file：/touch/hb/p/monitor/fedapm.1.2.0.js?v=2016091301*/
(function(){var b=0,a=0,t=window.navigator.userAgent.toLowerCase(),e=encodeURIComponent(document.domain),f=encodeURIComponent(window.location.pathname.toLowerCase().replace(/\//g,"_")),d=i(),l=document.location.hostname,c="//js.40017.cn/touch/hb/c/2/js/naJs.2.1.2.js",h=/(127[.]0[.]0[.]1)|(localhost)|10(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){3}|172\.([1][6-9]|[2]\d|3[01])(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}|192\.168(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}/,m=t.indexOf("tctravel")>0,n=t.indexOf("micromessenger")>0;function p(w,u){var v=document.createElement("script");v.type="text/javascript";v.src=w;v.onload=u;document.body.appendChild(v)}function r(u){u=u.toLowerCase();switch(u){case"cmwap":case"ctwap":case"ct_w_a_p":case"uniwap":case"unnet":case"uninet":case"3gprs":u="2g";break;case"cmnet":case"ctnet":case"3gwap":case"3gnet":case"my3g":u="3g";break;case"wwan":u="wifi";break;case"ctlte":u="4g";break;case"non_network":case"n":case"mobile":case"internet":case"vpdn":case"ygj":u="other";break}return u}function s(){return document.location.protocol.indexOf("file")!=-1?"http://vstlog.17usoft.com/monitor/__h5hm.gif":"//vstlog.17usoft.com/monitor/__h5hm.gif"}function q(){if(!g.options.openTest){if(h.test(l)){return true}}return false}function o(){window.setTimeout(function(){g.setup()},0)}function j(){return{staType:"monitor",project:g.options.project,t_brs:d,pageName:g.options.pageName,platform:g.platform,ext_domain:e,ext_path:f}}function k(w){if(w.indexOf("?")!=-1){w=w.split("?")[0]}w=w.split("/");var u=w.length,v=w[u-1];if(!v){v=g.options.project+"/"+g.options.pageName}return v}function i(){try{var y="other",x;if(window.ActiveXObject){return"IE"}if((!!window.opr&&!!opr.addons)||!!window.opera||t.indexOf("opr/")>=0){return"opera"}var u=[{ua:"qqbrowser",name:"qq"},{ua:"qq/",name:"qqclient"},{ua:"baiduboxapp",name:"baiduboxapp"},{ua:"miuibrowser",name:"miuibrowser"},{ua:"firefox",name:"firefox"},{ua:"baidubrowser",name:"baidu"},{ua:"sogoumobilebrowser",name:"sogou"},{ua:"mxios",name:"maxthon"},{ua:"mxbrowser",name:"maxthon"},{ua:"maxthon",name:"maxthon"},{ua:"ucbrowser",name:"UC"},{ua:"liebaofast",name:"liebao"},{ua:"lbbrowser",name:"liebao"},{ua:"qhbrowser",name:"360"},{ua:"360browser",name:"360"},{ua:"360se",name:"360"},{ua:"androidbrowser",name:"androidbrowser"},{ua:"samsung",name:"samsung"},{ua:"huawei",name:"huawei"},{ua:"vivo",name:"vivo"},{ua:"oppo",name:"oppo"},{ua:"lenovo",name:"lenovo"},{ua:"micromessenger",name:"micromessenger"},{ua:"weibo",name:"weibo"},{ua:"chrome",name:"chrome"},{ua:"safari",name:"safari"}];for(var w=0;w<u.length;w++){x=u[w];if(t.indexOf(x.ua)>-1){y=x.name;break}}return y}catch(v){return"other"}}var g={options:{url:s(),rate:1,data:{},errStat:0,resTimingStat:0,ajaxTiming:0,pageNameId:"__pageName",projectId:"__projectName",openTest:0,ajaxReqWithOut:40000},VERSION:"1.2.0",timing:{},data:{},getPageNameAndProjectName:function(){try{var v=document.getElementById(g.options.pageNameId||"__pageName"),w=document.getElementById(g.options.projectId||"__projectName");v=(v&&v.value&&(g.options.pageName=v.value))||g.options.pageName;w=(w&&w.value&&(g.options.project=w.value))||g.options.project;return{pageName:v,project:w}}catch(u){}},check:function(){var u=this.getPageNameAndProjectName();if(!u.project||!u.pageName){throw new Error("project或pageName不能为空")}else{g.options.project=u.project;g.options.pageName=u.pageName;return window.performance&&window.performance.timing&&Math.random()<g.options.rate}},setPlatform:function(){if(g.options.platform){this.platform=g.options.platform;return}var w=/android/.test(t)||/webos/.test(t)||/iphone/.test(t)||/ipad/.test(t)||/ipod/.test(t)||/blackberry/.test(t)||/windows phone/.test(t)||/meego/.test(t),u=/windows/.test(t)||/mac/.test(t),v=/tctravel/.test(t);if(n){this.platform="wechat"}else{if(v){this.platform="app"}else{if(w){this.platform="touch"}else{if(u){this.platform="pc"}else{this.platform="other"}}}}},merge:function(w,u){for(var v in u){if(u.hasOwnProperty(v)){w[v]=u[v]}}return w},setup:function(){g.timing=window.performance.timing;if(g.setData(g.timing)){g.send(g.data)}},getResourceLoadTime:function(){try{var w=[];if(!("performance" in window)||!("getEntriesByType" in window.performance)||!(window.performance.getEntriesByType("resource") instanceof Array)){}else{w=window.performance.getEntriesByType("resource");if(w.length>0){var y,x=[],z=0,u;w.forEach(function(A){y=k(A.name);if(y){if(A.duration>0){x.push({perTime:A.duration,perName:y,perType:A.initiatorType||"unknown"});z+=A.duration}}});if(x.length>0){u={resAllTime:z,resCount:x.length,resItem:JSON.stringify(x)};return u}}}}catch(v){}},setData:function(y){var w=y.navigationStart||y.fetchStart,x=this;var u={t_unload:y.unloadEventEnd-y.unloadEventStart,t_redirect:y.redirectEnd-y.redirectStart,t_dns:y.domainLookupEnd-y.domainLookupStart,t_tcp:y.connectEnd-y.connectStart,t_request:y.responseStart-y.requestStart,t_response:y.responseEnd-y.responseStart,t_paint:g.getFirstPaintTime()-w,t_dom:y.domContentLoadedEventStart-y.domLoading,t_domready:y.domContentLoadedEventStart-w,t_load:y.loadEventStart-y.domLoading,t_onload:y.loadEventStart-w,t_white:y.responseStart-w,t_all:y.loadEventEnd-w};g.options.resTimingStat&&x.getResourceLoadTime()&&g.merge(u,x.getResourceLoadTime());for(var v in u){if(u.hasOwnProperty(v)){if(u[v]<=0||u[v]>=120000){delete u[v]}}}g.data=g.merge(u,g.options.data);return w>0},getReqServiceName:function(u){var w,x;if(({}).toString.call(u)==="[object Object]"){x=u.servicename||"";w=u.requrl||""}else{try{u=JSON.parse(u);x=u.servicename||"";w=u.requrl||""}catch(v){}}return x||w},processAjax:function(u){var v=this;return function(){var w=[].slice.call(arguments),x=w[0],y=x.beforeSend,z=x.complete,B=x.url,A=x.data||{};B=v.getReqServiceName(A)||B;x.beforeSend=function(){b=+new Date();y&&y.call()};x.complete=function(){var C=[].slice.call(arguments),G,F=null;a=+new Date();G=a-b;if(B&&G>0&&G<=g.options.ajaxReqWithOut){if(C[0]&&C[0].status){try{F=(C[0].status).toString()}catch(D){}}var E={interfaceUrl:B.replace(/:/gi,"@"),interfaceTime:G,interfaceStatus:F||"-40017"};g.send(E)}z&&z.apply(this,C)};return u.apply(this,w)}},rewriteAjax:function(){try{var w=this,u;if(window.$&&window.$.ajax){u=$.ajax;$.ajax=w.processAjax(u)}if(window.fish&&window.fish.ajax){u=fish.ajax;fish.ajax=w.processAjax(u)}}catch(v){}},getFirstPaintTime:function(){var u=0;if(window.chrome&&typeof window.chrome.loadTimes==="function"){u=window.chrome.loadTimes().firstPaintTime*1000}else{if(typeof g.timing.msFirstPaint==="number"){u=g.timing.msFirstPaint}}return Math.round(u)},send:function(v){var D=g.options.url;if(!D){return}var x=new Image(),y=[],C,u=j(),A;v=this.merge(u,v||{});for(var z in v){if(v.hasOwnProperty(z)){if(v[z]){if(Object.prototype.toString.call(v[z])==="[object Array]"){v[z]=JSON.stringify(v[z])}y.push(z+"="+encodeURIComponent(v[z]))}}}C=D+(D.indexOf("?")<0?"?":"&")+y.join("&");if(m){if(window._tc_bridge_util){window._tc_bridge_util.get_network_type({param:{},callback:function(E){if(E.CBData){try{A=r(JSON.parse(E.CBData).networkType)}catch(F){A=""}if(A){C+=("&networktype="+A)}x.src=C+"&rnd="+(+new Date())}}})}else{p(c,function(){window._tc_bridge_util.get_network_type({param:{},callback:function(E){if(E.CBData){try{A=r(JSON.parse(E.CBData).networkType)}catch(F){A=""}if(A){C+=("&networktype="+A)}x.src=C+"&rnd="+(+new Date())}}})})}}else{if(n){try{var B=t.match(/(nettype\/(\w)+)(?=\s)/);if(B&&B.length>0){if(B[0].indexOf("/")>0){A=r(B[0].split("/")[1])}}if(A){C+=("&networktype="+A)}x.src=C+"&rnd="+(+new Date())}catch(w){}}else{x.src=C+"&rnd="+(+new Date())}}},bindEvents:function(){window.onerror=function(y,z,x,u,w){if(z){var v={errFile:k(z).replace(/:/gi,"@")};g.send({errMsg:JSON.stringify(v)})}}},start:function(u){g.options=g.merge(g.options,u);if(q()){return}this.setPlatform();g.options.errStat&&this.bindEvents();g.options.ajaxTiming&&this.rewriteAjax();if(g.check()){if(window.performance.timing.loadEventEnd>0){g.setup()}else{if(window.addEventListener){window.addEventListener("load",o,false)}}}else{g.send()}}};window.fedApm=g}).call(this);